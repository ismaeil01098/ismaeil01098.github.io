<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ… - Ù…Ù†ØµØ© Ø§Ù„Ø¹Ù„ÙˆÙ…</title>
  <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;500;700;800&display=swap" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    * { box-sizing: border-box; margin: 0; padding: 0; }
    body { font-family: 'Tajawal', sans-serif; background: #1e1e1e; color: #fff; }
    
    /* Overlay (login) */
    .overlay {
      position: fixed; top: 0; left: 0; width: 100%; height: 100%;
      background: linear-gradient(135deg, #1a1a1a, #2c2c2c); 
      display: flex; align-items: center; justify-content: center; 
      z-index: 1000;
    }
    .login-container {
      background: #242424; 
      padding: 2.5rem; 
      border-radius: 15px;
      width: 90%; 
      max-width: 420px; 
      text-align: center; 
      color: #fff;
      box-shadow: 0 10px 30px rgba(0,0,0,0.5);
      border: 1px solid #3a3a3a;
    }
    .login-container h2 {
      color: #b6a564;
      margin-bottom: 1.5rem;
      font-weight: 800;
      font-size: 1.8rem;
    }
    .login-container .logo {
      width: 80px;
      height: 80px;
      background: #b6a564;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      margin: 0 auto 1rem;
      font-size: 2rem;
    }
    .input-group {
      margin-bottom: 1.2rem;
      text-align: right;
    }
    .input-group label {
      display: block;
      margin-bottom: 0.5rem;
      color: #b6a564;
      font-weight: 500;
    }
    .input-group input {
      width: 100%; 
      padding: 0.9rem 1rem;
      background: #2c2c2c;
      border: 1px solid #3a3a3a;
      border-radius: 8px; 
      font-size: 1rem;
      color: #fff;
      transition: all 0.3s ease;
    }
    .input-group input:focus {
      border-color: #b6a564;
      outline: none;
      box-shadow: 0 0 0 2px rgba(182, 165, 100, 0.3);
    }
    .input-group input::placeholder {
      color: #888;
    }
    .login-container button {
      margin-top: 1rem; 
      padding: 0.9rem 1.5rem;
      background: #b6a564; 
      color: #1e1e1e; 
      border: none;
      border-radius: 8px; 
      font-size: 1.1rem; 
      cursor: pointer;
      font-weight: 700;
      width: 100%;
      transition: all 0.3s ease;
    }
    .login-container button:hover {
      background: #c8b87a;
      transform: translateY(-2px);
      box-shadow: 0 5px 15px rgba(182, 165, 100, 0.4);
    }
    .login-container .error {
      color: #ff6b6b;
      margin-top: 1rem;
      min-height: 1.5rem;
      font-weight: 500;
    }
    .login-footer {
      margin-top: 1.5rem;
      color: #888;
      font-size: 0.9rem;
    }

    /* Dashboard wrapper */
    #dashboard { 
      display: none; 
      min-height: 100vh; 
    }

    /* Header */
    .header {
      background: linear-gradient(to right, #1a1a1a, #24221e);
      padding: 1rem;
      display: flex;
      justify-content: space-between;
      align-items: center;
      border-bottom: 2px solid #b6a564;
    }
    .header .logo {
      display: flex;
      align-items: center;
      gap: 0.8rem;
    }
    .header .logo-icon {
      background: #b6a564;
      width: 40px;
      height: 40px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: bold;
      font-size: 1.2rem;
    }
    .header .logo-text {
      font-weight: 800;
      font-size: 1.4rem;
      color: #b6a564;
    }
    .header .admin-info {
      display: flex;
      align-items: center;
      gap: 0.8rem;
    }
    .header .admin-name {
      font-weight: 700;
    }
    .header .logout-btn {
      background: #3a3a3a;
      padding: 0.5rem 1rem;
      border-radius: 20px;
      cursor: pointer;
      transition: all 0.3s;
      font-weight: 500;
    }
    .header .logout-btn:hover {
      background: #ff6b6b;
    }

    /* Top navigation */
    .topnav {
      display: flex; 
      flex-wrap: wrap; 
      justify-content: center;
      gap: 0.8rem; 
      background: #24221e; 
      padding: 1rem 0;
      border-bottom: 1px solid #3a3a3a;
    }
    .topnav div {
      cursor: pointer; 
      padding: 0.7rem 1.5rem;
      border-radius: 30px; 
      background: #2c2c2c; 
      color: #aaa;
      font-weight: bold; 
      transition: all 0.3s;
      display: flex;
      align-items: center;
      gap: 0.5rem;
      border: 1px solid transparent;
    }
    .topnav div:hover {
      background: #3a3a3a;
      color: #fff;
    }
    .topnav div.active { 
      background: #3ab54a; 
      color: #fff;
      border-color: #b6a564;
    }

    /* Main content area */
    .main {
      padding: 1.5rem; 
      max-width: 1200px; 
      margin: 1.5rem auto;
    }
    section { 
      display: none; 
      animation: fadeIn 0.5s ease;
    }
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }
    section.active { display: block; }
    .section-title {
      font-size: 1.8rem;
      margin-bottom: 1.5rem;
      color: #b6a564;
      display: flex;
      align-items: center;
      gap: 0.8rem;
      padding-bottom: 0.5rem;
      border-bottom: 2px solid #3a3a3a;
    }
    
    /* Common components */
    .form-group {
      margin-bottom: 1.5rem;
      max-width: 600px;
    }
    .form-group label {
      display: block;
      margin-bottom: 0.5rem;
      color: #b6a564;
      font-weight: 600;
      font-size: 1.1rem;
    }
    .form-group input, 
    .form-group select, 
    .form-group textarea {
      width: 100%; 
      padding: 0.9rem 1rem;
      background: #2c2c2c;
      border: 1px solid #3a3a3a;
      border-radius: 8px; 
      font-size: 1rem;
      color: #fff;
      font-family: 'Tajawal', sans-serif;
      transition: all 0.3s;
    }
    .form-group input:focus, 
    .form-group select:focus, 
    .form-group textarea:focus {
      border-color: #b6a564;
      outline: none;
      box-shadow: 0 0 0 2px rgba(182, 165, 100, 0.3);
    }
    .form-group textarea {
      min-height: 120px;
      resize: vertical;
    }
    .action {
      padding: 0.7rem 1.2rem;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      font-family: 'Tajawal', sans-serif;
      font-weight: bold;
      font-size: 1rem;
      transition: all 0.3s;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 0.5rem;
    }
    .action:hover {
      transform: translateY(-2px);
      box-shadow: 0 4px 8px rgba(0,0,0,0.3);
    }
    .active-btn { 
      background: #3ab54a; 
      color: white; 
    }
    .active-btn:hover {
      background: #2da03d;
    }
    .inactive-btn { 
      background: #f44336; 
      color: white; 
    }
    .inactive-btn:hover {
      background: #e53935;
    }
    .delete-btn { 
      background: #f44336; 
      color: white; 
    }
    .delete-btn:hover {
      background: #e53935;
    }
    .btn-group {
      display: flex;
      gap: 0.8rem;
      margin-top: 1rem;
      flex-wrap: wrap;
    }
    .loader {
      text-align: center;
      padding: 2rem;
      font-weight: bold;
      color: #b6a564;
      font-size: 1.2rem;
    }
    .stats-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 1.5rem;
      margin-bottom: 2rem;
    }
    .stat-card {
      background: #2c2c2c;
      border-radius: 12px;
      padding: 1.5rem;
      text-align: center;
      border-left: 4px solid #b6a564;
      box-shadow: 0 5px 15px rgba(0,0,0,0.2);
      transition: all 0.3s;
    }
    .stat-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 8px 20px rgba(0,0,0,0.3);
    }
    .stat-card .number {
      font-size: 2.5rem;
      font-weight: 800;
      color: #b6a564;
      margin: 0.5rem 0;
    }
    .stat-card .label {
      font-size: 1.1rem;
      color: #aaa;
    }
    
    /* Tables */
    .table-container {
      overflow-x: auto;
      border-radius: 12px;
      border: 1px solid #3a3a3a;
      margin-top: 1.5rem;
      background: #2c2c2c;
      box-shadow: 0 5px 15px rgba(0,0,0,0.2);
    }
    table {
      width: 100%; 
      border-collapse: collapse;
      min-width: 800px;
    }
    th, td {
      padding: 1rem;
      text-align: center;
      border-bottom: 1px solid #3a3a3a;
    }
    th {
      background: #1a1a1a;
      color: #b6a564;
      font-weight: 700;
      font-size: 1.1rem;
    }
    tr:nth-child(even) {
      background: #242424;
    }
    tr:hover {
      background: #333;
    }
    .action-cell {
      display: flex;
      gap: 0.5rem;
      justify-content: center;
    }
    
    /* Charts */
    .chart-container {
      background: #2c2c2c;
      padding: 1.5rem;
      border-radius: 12px;
      margin-top: 1.5rem;
      box-shadow: 0 5px 15px rgba(0,0,0,0.2);
    }
    
    /* Responsive */
    @media (max-width: 768px) {
      .login-container {
        padding: 1.5rem;
      }
      .header {
        flex-direction: column;
        gap: 1rem;
      }
      .topnav div {
        padding: 0.6rem 1rem;
        font-size: 0.9rem;
      }
      .main {
        padding: 1rem;
      }
      .section-title {
        font-size: 1.5rem;
      }
      .stats-grid {
        grid-template-columns: 1fr;
      }
    }
  </style>
</head>
<body>
  <!-- 1) Auth Overlay -->
  <div id="overlay" class="overlay">
    <div class="login-container">
      <div class="logo">âš—ï¸</div>
      <h2>Ù„ÙˆØ­Ø© ØªØ­ÙƒÙ… Ù…Ù†ØµØ© Ø§Ù„Ø¹Ù„ÙˆÙ…</h2>
      <div class="input-group">
        <label for="admin-phone">Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ</label>
        <input type="text" id="admin-phone" placeholder="Ø£Ø¯Ø®Ù„ Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ" maxlength="11" />
      </div>
      <div class="input-group">
        <label for="admin-pass">ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±</label>
        <input type="password" id="admin-pass" placeholder="Ø£Ø¯Ø®Ù„ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±" />
      </div>
      <button onclick="checkPassword()">Ø¯Ø®ÙˆÙ„ Ø¥Ù„Ù‰ Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…</button>
      <div id="pass-error" class="error"></div>
      <div class="login-footer">
        Ù…Ù†ØµØ© Ø§Ù„Ø¹Ù„ÙˆÙ… Â© 2024 - Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸Ø©
      </div>
    </div>
  </div>

  <!-- 2) Dashboard Base Layout -->
  <div id="dashboard">
    <div class="header">
      <div class="logo">
        <div class="logo-icon">âš—ï¸</div>
        <div class="logo-text">Ù…Ù†ØµØ© Ø§Ù„Ø¹Ù„ÙˆÙ…</div>
      </div>
      <div class="admin-info">
        <div class="admin-name">Ù…Ø±Ø­Ø¨Ø§Ù‹ØŒ Ø§Ù„Ù…Ø¯ÙŠØ±</div>
        <div class="logout-btn" onclick="logout()">ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬</div>
      </div>
    </div>
    
    <div class="topnav">
      <div id="tab-stu" class="active" onclick="showSection('students')">
        <span>ğŸ‘¥</span> Ø§Ù„Ø·Ù„Ø§Ø¨
      </div>
      <div id="tab-con" onclick="showSection('content')">
        <span>ğŸ“</span> Ø§Ù„Ù…Ø­ØªÙˆÙ‰
      </div>
      <div id="tab-ann" onclick="showSection('announce')">
        <span>ğŸ””</span> Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†Ø§Øª
      </div>
      <div id="tab-stat" onclick="showSection('stats')">
        <span>ğŸ“Š</span> Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª
      </div>
    </div>
    
    <div class="main">
      <!-- Students Section -->
      <section id="students" class="active">
        <h2 class="section-title">ğŸ‘¥ Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø·Ù„Ø§Ø¨</h2>
        <div class="form-group">
          <input type="text" id="student-search" placeholder="ğŸ” Ø§Ø¨Ø­Ø« Ø¨Ø§Ù„Ø§Ø³Ù… Ø£Ùˆ Ø§Ù„Ù‡Ø§ØªÙ" oninput="filterStudents()" />
        </div>
        <div id="loader-stu" class="loader">Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø·Ù„Ø§Ø¨...</div>
        <div class="table-container">
          <table id="tbl-stu" style="display:none;">
            <thead>
              <tr>
                <th>ğŸ“ Ø§Ù„Ù‡Ø§ØªÙ</th>
                <th>ğŸ‘¤ Ø§Ù„Ø§Ø³Ù…</th>
                <th>ğŸ“ Ø§Ù„Ù…Ø±Ø­Ù„Ø©</th>
                <th>ğŸ“ Ø§Ù„Ù…Ø­Ø§ÙØ¸Ø©</th>
                <th>âœ… Ø§Ù„Ø­Ø§Ù„Ø©</th>
                <th>ğŸ•“ Ø§Ù„ØªØ³Ø¬ÙŠÙ„</th>
                <th>ğŸ› ï¸ Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª</th>
              </tr>
            </thead>
            <tbody></tbody>
          </table>
        </div>
      </section>
      
      <!-- Content Section -->
      <section id="content">
        <h2 class="section-title">ğŸ“ Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø­ØªÙˆÙ‰ Ø§Ù„ØªØ¹Ù„ÙŠÙ…ÙŠ</h2>
        <div class="form-group">
          <label>Ø§Ù„Ù…Ø±Ø­Ù„Ø© Ø§Ù„Ø¯Ø±Ø§Ø³ÙŠØ©</label>
          <select id="content-stage">
            <option value="">-- Ø§Ø®ØªØ± Ø§Ù„Ù…Ø±Ø­Ù„Ø© --</option>
            <option value="grade4">Ø§Ù„ØµÙ Ø§Ù„Ø±Ø§Ø¨Ø¹</option>
            <option value="grade5">Ø§Ù„ØµÙ Ø§Ù„Ø®Ø§Ù…Ø³</option>
            <option value="grade6">Ø§Ù„ØµÙ Ø§Ù„Ø³Ø§Ø¯Ø³</option>
            <option value="prep1">Ø§Ù„Ø£ÙˆÙ„ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯ÙŠ</option>
            <option value="prep2">Ø§Ù„Ø«Ø§Ù†ÙŠ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯ÙŠ</option>
            <option value="prep3">Ø§Ù„Ø«Ø§Ù„Ø« Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯ÙŠ</option>
          </select>
        </div>
        <div class="form-group">
          <label>Ù†ÙˆØ¹ Ø§Ù„Ù…Ø­ØªÙˆÙ‰</label>
          <select id="content-type">
            <option value="videos">ğŸ¥ ÙÙŠØ¯ÙŠÙˆ ØªØ¹Ù„ÙŠÙ…ÙŠ</option>
            <option value="notes">ğŸ“„ Ù…Ù„Ø§Ø­Ø¸Ø§Øª ÙˆÙ…Ù„Ø®ØµØ§Øª</option>
            <option value="exams">ğŸ“ Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª ÙˆØªØ¯Ø±ÙŠØ¨Ø§Øª</option>
          </select>
        </div>
        <div class="form-group">
          <label>Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ù…Ø­ØªÙˆÙ‰</label>
          <input type="text" id="content-title" placeholder="Ø£Ø¯Ø®Ù„ Ø¹Ù†ÙˆØ§Ù† ÙˆØ§Ø¶Ø­ Ù„Ù„Ù…Ø­ØªÙˆÙ‰" />
        </div>
        <div class="form-group">
          <label>Ø±Ø§Ø¨Ø· Ø§Ù„Ù…Ø­ØªÙˆÙ‰</label>
          <input type="text" id="content-url" placeholder="Ù…Ø«Ø§Ù„: https://youtube.com/..." />
        </div>
        <button class="action active-btn" onclick="submitContent()">â• Ø¥Ø¶Ø§ÙØ© Ù…Ø­ØªÙˆÙ‰ Ø¬Ø¯ÙŠØ¯</button>
        
        <div id="loader-con" class="loader">Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ø­ØªÙˆÙ‰ Ø§Ù„ØªØ¹Ù„ÙŠÙ…ÙŠ...</div>
        <div class="table-container">
          <table id="tbl-con" style="display:none; margin-top:1.5rem;">
            <thead>
              <tr>
                <th>ID</th>
                <th>Ù…Ø±Ø­Ù„Ø©</th>
                <th>Ù†ÙˆØ¹</th>
                <th>Ø§Ù„Ø¹Ù†ÙˆØ§Ù†</th>
                <th>Ø§Ù„Ø±Ø§Ø¨Ø·</th>
                <th>âŒ Ø­Ø°Ù</th>
              </tr>
            </thead>
            <tbody></tbody>
          </table>
        </div>
      </section>
      
      <!-- Announcements Section -->
      <section id="announce">
        <h2 class="section-title">ğŸ”” Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†Ø§Øª</h2>
        <div class="form-group">
          <label>Ø§Ù„Ù…Ø±Ø­Ù„Ø© Ø§Ù„Ù…Ø³ØªÙ‡Ø¯ÙØ©</label>
          <select id="ann-stage">
            <option value="">-- Ø§Ø®ØªØ± Ø§Ù„Ù…Ø±Ø­Ù„Ø© --</option>
            <option value="grade4">Ø§Ù„ØµÙ Ø§Ù„Ø±Ø§Ø¨Ø¹</option>
            <option value="grade5">Ø§Ù„ØµÙ Ø§Ù„Ø®Ø§Ù…Ø³</option>
            <option value="grade6">Ø§Ù„ØµÙ Ø§Ù„Ø³Ø§Ø¯Ø³</option>
            <option value="prep1">Ø§Ù„Ø£ÙˆÙ„ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯ÙŠ</option>
            <option value="prep2">Ø§Ù„Ø«Ø§Ù†ÙŠ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯ÙŠ</option>
            <option value="prep3">Ø§Ù„Ø«Ø§Ù„Ø« Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯ÙŠ</option>
            <option value="all">Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ø±Ø§Ø­Ù„</option>
          </select>
        </div>
        <div class="form-group">
          <label>Ù†Øµ Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†</label>
          <textarea id="ann-text" placeholder="Ø§ÙƒØªØ¨ Ù‡Ù†Ø§ Ù†Øµ Ø§Ù„Ø¥Ø¹Ù„Ø§Ù† Ø§Ù„Ø°ÙŠ Ø³ÙŠØªÙ… Ø¥Ø±Ø³Ø§Ù„Ù‡ Ù„Ù„Ø·Ù„Ø§Ø¨..."></textarea>
        </div>
        <button class="action active-btn" onclick="addAnnouncement()">â• Ù†Ø´Ø± Ø¥Ø¹Ù„Ø§Ù† Ø¬Ø¯ÙŠØ¯</button>
        
        <div id="loader-ann" class="loader">Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†Ø§Øª...</div>
        <div class="table-container">
          <table id="tbl-ann" style="display:none; margin-top:1.5rem;">
            <thead>
              <tr>
                <th>Ø§Ù„Ù…Ø±Ø­Ù„Ø©</th>
                <th>Ù†Øµ Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†</th>
                <th>ğŸ—‘ï¸ Ø­Ø°Ù</th>
              </tr>
            </thead>
            <tbody></tbody>
          </table>
        </div>
      </section>
      
      <!-- Statistics Section -->
      <section id="stats">
        <h2 class="section-title">ğŸ“Š Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„Ù…Ù†ØµØ©</h2>
        
        <div class="stats-grid">
          <div class="stat-card">
            <div class="label">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø·Ù„Ø§Ø¨</div>
            <div class="number" id="cntAll">0</div>
            <div class="desc">Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø·Ù„Ø§Ø¨ Ø§Ù„Ù…Ø³Ø¬Ù„ÙŠÙ†</div>
          </div>
          <div class="stat-card">
            <div class="label">Ø§Ù„Ù…Ø´ØªØ±ÙƒÙˆÙ† Ø§Ù„Ù…ÙØ¹Ù„ÙˆÙ†</div>
            <div class="number" id="cntActive">0</div>
            <div class="desc">Ø·Ù„Ø§Ø¨ Ù†Ø´Ø·ÙˆÙ† Ø­Ø§Ù„ÙŠØ§Ù‹</div>
          </div>
          <div class="stat-card">
            <div class="label">Ø·Ù„Ø§Ø¨ Ø¬Ø¯Ø¯ Ø§Ù„ÙŠÙˆÙ…</div>
            <div class="number" id="cntToday">0</div>
            <div class="desc">Ù…Ø³Ø¬Ù„ÙˆÙ† Ø®Ù„Ø§Ù„ 24 Ø³Ø§Ø¹Ø©</div>
          </div>
          <div class="stat-card">
            <div class="label">Ø¨Ø§Ù†ØªØ¸Ø§Ø± Ø§Ù„ØªÙØ¹ÙŠÙ„</div>
            <div class="number" id="cntPending">0</div>
            <div class="desc">Ø·Ù„Ø§Ø¨ Ø¨Ø§Ù†ØªØ¸Ø§Ø± ØªÙØ¹ÙŠÙ„ Ø§Ù„Ø§Ø´ØªØ±Ø§Ùƒ</div>
          </div>
        </div>
        
        <div class="chart-container">
          <canvas id="chartStages"></canvas>
        </div>
      </section>
    </div>
  </div>

  <!-- Firebase & Utilities -->
  <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-auth.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>
  <script>
    // 1) Firebase Initialization
    const firebaseConfig = {
      apiKey: "AIzaSyDEvdGB2dHbB9k0mvAa14VFaKvjSfooB20",
      authDomain: "manssat-science.firebaseapp.com",
      databaseURL: "https://manssat-science-default-rtdb.europe-west1.firebasedatabase.app",
      projectId: "manssat-science",
      storageBucket: "manssat-science.appspot.com",
      messagingSenderId: "22539678455",
      appId: "1:22539678455:web:bd8cdc9ecd950a2b53d9f2"
    };
    if (!firebase.apps.length) firebase.initializeApp(firebaseConfig);
    const auth = firebase.auth();
    const db = firebase.database();
    const stageNames = {
      "grade4": "Ø§Ù„ØµÙ Ø§Ù„Ø±Ø§Ø¨Ø¹",
      "grade5": "Ø§Ù„ØµÙ Ø§Ù„Ø®Ø§Ù…Ø³",
      "grade6": "Ø§Ù„ØµÙ Ø§Ù„Ø³Ø§Ø¯Ø³",
      "prep1": "Ø§Ù„Ø£ÙˆÙ„ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯ÙŠ",
      "prep2": "Ø§Ù„Ø«Ø§Ù†ÙŠ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯ÙŠ",
      "prep3": "Ø§Ù„Ø«Ø§Ù„Ø« Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯ÙŠ",
      "all": "Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ø±Ø§Ø­Ù„"
    };
    const contentTypeNames = {
      "videos": "ÙÙŠØ¯ÙŠÙˆ ØªØ¹Ù„ÙŠÙ…ÙŠ",
      "notes": "Ù…Ù„Ø§Ø­Ø¸Ø§Øª ÙˆÙ…Ù„Ø®ØµØ§Øª",
      "exams": "Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª ÙˆØªØ¯Ø±ÙŠØ¨Ø§Øª"
    };

    // 2) Auth check
    function checkPassword() {
      const phone = document.getElementById('admin-phone').value.trim();
      const pass  = document.getElementById('admin-pass').value.trim();
      const error = document.getElementById('pass-error');
      
      if (!phone || !pass) {
        error.innerText = 'ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ ÙˆÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±';
        return;
      }
      
      const email = `${phone}@manssat.com`;
      error.innerText = '';
      
      auth.signInWithEmailAndPassword(email, pass)
        .then(userCred => db.ref(`users/students/${userCred.user.uid}/isAdmin`).once('value'))
        .then(snap => {
          if (snap.val() === true) {
            document.getElementById('overlay').style.display = 'none';
            document.getElementById('dashboard').style.display = 'block';
            document.querySelector('.admin-name').innerText = `Ù…Ø±Ø­Ø¨Ø§Ù‹ØŒ ${phone}`;
            showSection('students');
          } else {
            error.innerText = 'Ù„ÙŠØ³ Ù„Ø¯ÙŠÙƒ ØµÙ„Ø§Ø­ÙŠØ§Øª Ù…Ø¯ÙŠØ±';
            auth.signOut();
          }
        })
        .catch(err => {
          console.error(err);
          error.innerText = 'Ø®Ø·Ø£ ÙÙŠ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¯Ø®ÙˆÙ„. ÙŠØ±Ø¬Ù‰ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ù…Ø±Ø© Ø£Ø®Ø±Ù‰';
        });
    }
    
    // 3) Logout
    function logout() {
      auth.signOut().then(() => {
        document.getElementById('overlay').style.display = 'flex';
        document.getElementById('dashboard').style.display = 'none';
        document.getElementById('admin-pass').value = '';
        document.getElementById('pass-error').innerText = '';
      });
    }

    // 4) Section switcher
    function showSection(id) {
      ['students','content','announce','stats'].forEach(sec => {
        document.getElementById(sec).classList.toggle('active', sec === id);
        document.getElementById('tab-' + sec.slice(0,3)).classList.toggle('active', sec === id);
      });
      
      // Load section data when activated
      if (id === 'students') fetchStudents();
      if (id === 'content') fetchContent();
      if (id === 'announce') fe

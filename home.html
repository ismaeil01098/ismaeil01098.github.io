<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Ù„ÙˆØ­Ø© Ø§Ù„Ø·Ø§Ù„Ø¨ - Ù†Ø¸Ø§Ù… Ø§Ù„Ù…ØªØ§Ø¨Ø¹Ø©</title>
    
    <!-- Ù…ÙƒØªØ¨Ø© Ø§Ù„Ø®Ø·ÙˆØ· -->
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@300;400;600;700;800&family=Tajawal:wght@300;400;500;700&family=El+Messiri:wght@400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- Ø£ÙŠÙ‚ÙˆÙ†Ø§Øª Material -->
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons+Round" rel="stylesheet">
    
    <style>
        /* Ù…ØªØºÙŠØ±Ø§Øª Ø§Ù„ØªØµÙ…ÙŠÙ… - Ù…Ø¹Ø¯Ù„Ø© Ù„ØªÙƒÙˆÙ† Ø£ÙƒØ«Ø± Ø¨Ø³Ø§Ø·Ø© */
        :root {
            --primary: #2563eb;
            --secondary: #059669;
            --accent: #7c3aed;
            --success: #10b981;
            --warning: #f59e0b;
            --danger: #dc2626;
            --light: #f8fafc;
            --dark: #1e293b;
            --text: #475569;
            --text-light: #64748b;
            --card-bg: #ffffff;
            --shadow-sm: 0 1px 3px rgba(0, 0, 0, 0.1);
            --shadow-md: 0 4px 6px rgba(0, 0, 0, 0.07);
            --shadow-lg: 0 10px 15px rgba(0, 0, 0, 0.1);
            --radius: 12px;
            --radius-sm: 8px;
        }
        
        /* Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„ØªØ¹ÙŠÙŠÙ† */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }
        
        html, body {
            width: 100%;
            height: 100%;
            overflow-x: hidden;
        }
        
        body {
            font-family: 'Cairo', 'Tajawal', sans-serif;
            background-color: var(--light);
            color: var(--text);
            line-height: 1.5;
            padding: 0;
            overflow-y: auto;
        }
        
        /* Ø§Ù„Ø­Ø§ÙˆÙŠØ© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© */
        .main-container {
            max-width: 100%;
            margin: 0 auto;
            padding: 16px;
            padding-bottom: 80px;
        }
        
        /* Ø´Ø±ÙŠØ· Ø§Ù„ØªÙ†Ù‚Ù„ Ø§Ù„Ø¹Ù„ÙˆÙŠ - Ù…Ø¹Ø¯Ù„ */
        .top-nav {
            background: var(--card-bg);
            border-radius: var(--radius);
            padding: 16px;
            margin-bottom: 16px;
            box-shadow: var(--shadow-md);
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 12px;
        }
        
        .user-info {
            display: flex;
            align-items: center;
            gap: 12px;
            flex: 1;
        }
        
        .user-avatar {
            width: 44px;
            height: 44px;
            background: linear-gradient(135deg, var(--primary), var(--accent));
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 18px;
            color: white;
            font-weight: bold;
            flex-shrink: 0;
        }
        
        .user-details {
            flex: 1;
        }
        
        .user-name {
            font-family: 'Cairo', sans-serif;
            font-size: 16px;
            font-weight: 700;
            color: var(--dark);
            margin-bottom: 2px;
        }
        
        .user-class {
            font-family: 'Tajawal', sans-serif;
            font-size: 13px;
            color: var(--text-light);
            display: flex;
            align-items: center;
            gap: 4px;
        }
        
        .nav-actions {
            display: flex;
            gap: 8px;
        }
        
        .nav-btn {
            width: 40px;
            height: 40px;
            background: var(--light);
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--primary);
            font-size: 18px;
            cursor: pointer;
            border: 1px solid var(--primary);
            transition: all 0.2s ease;
        }
        
        .nav-btn:hover {
            background: var(--primary);
            color: white;
        }
        
        /* Ø¨Ø·Ø§Ù‚Ø© Ø§Ù„Ù…Ø¤Ù‚Øª - Ù…Ø¹Ø¯Ù„Ø© */
        .timer-card {
            background: linear-gradient(135deg, var(--dark), #2d3748);
            border-radius: var(--radius);
            padding: 20px;
            margin-bottom: 16px;
            color: white;
            box-shadow: var(--shadow-lg);
        }
        
        .timer-content {
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 16px;
        }
        
        .timer-text h3 {
            font-family: 'Cairo', sans-serif;
            font-size: 16px;
            margin-bottom: 4px;
            color: white;
        }
        
        .timer-text p {
            font-family: 'Tajawal', sans-serif;
            font-size: 13px;
            opacity: 0.8;
        }
        
        .timer-display {
            font-family: 'Cairo', sans-serif;
            font-size: 24px;
            font-weight: 700;
            color: white;
        }
        
        /* Ø²Ø± Ø§Ù„Ø£Ø®Ø¨Ø§Ø± - Ù…Ø¹Ø¯Ù„ */
        .news-btn {
            background: linear-gradient(135deg, var(--accent), #8b5cf6);
            color: white;
            padding: 16px;
            border-radius: var(--radius);
            font-family: 'Cairo', sans-serif;
            font-size: 16px;
            font-weight: 600;
            text-align: center;
            margin: 20px 0;
            border: none;
            width: 100%;
            cursor: pointer;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            box-shadow: var(--shadow-md);
        }
        
        .news-btn:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-lg);
        }
        
        /* Ø§Ù„Ø´Ø¨ÙƒØ© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© - Ù…Ø¹Ø¯Ù„Ø© */
        .dashboard-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 16px;
            margin: 20px 0;
        }
        
        /* Ø§Ù„Ø¨Ø·Ø§Ù‚Ø§Øª - Ù…Ø¹Ø¯Ù„Ø© */
        .dashboard-card {
            background: var(--card-bg);
            border-radius: var(--radius);
            padding: 20px;
            box-shadow: var(--shadow-sm);
            border: 1px solid #e2e8f0;
            transition: all 0.2s ease;
            min-height: 140px;
            display: flex;
            flex-direction: column;
        }
        
        .dashboard-card:hover {
            box-shadow: var(--shadow-md);
            transform: translateY(-2px);
        }
        
        .card-header {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 16px;
        }
        
        .card-icon {
            width: 44px;
            height: 44px;
            background: linear-gradient(135deg, var(--primary), #3b82f6);
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
            color: white;
            flex-shrink: 0;
        }
        
        .card-title {
            font-family: 'Cairo', sans-serif;
            font-size: 15px;
            font-weight: 700;
            color: var(--dark);
            flex: 1;
        }
        
        .card-content {
            font-family: 'Tajawal', sans-serif;
            font-size: 14px;
            color: var(--text);
            line-height: 1.5;
            flex: 1;
        }
        
        /* Ø¨Ø·Ø§Ù‚Ø© Ø§Ù„Ø¯Ø±Ø¬Ø§Øª Ø§Ù„Ù…Ø¯Ù…Ø¬Ø© - Ù…Ø¹Ø¯Ù„Ø© */
        .grades-mini {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(70px, 1fr));
            gap: 8px;
            margin-top: 12px;
        }
        
        .grade-mini {
            background: rgba(37, 99, 235, 0.08);
            border-radius: var(--radius-sm);
            padding: 12px 6px;
            text-align: center;
            border: 1px solid rgba(37, 99, 235, 0.1);
        }
        
        .grade-label {
            font-family: 'Cairo', sans-serif;
            font-size: 11px;
            color: var(--text-light);
            margin-bottom: 4px;
            font-weight: 600;
        }
        
        .grade-value {
            font-family: 'Cairo', sans-serif;
            font-size: 20px;
            font-weight: 700;
            color: var(--primary);
        }
        
        /* Ø¨Ø·Ø§Ù‚Ø© Ø§Ù„ÙˆØ§Ø¬Ø¨Ø§Øª - Ù…Ø¹Ø¯Ù„Ø© */
        .homework-preview {
            background: rgba(16, 185, 129, 0.08);
            border-radius: var(--radius-sm);
            padding: 16px;
            margin-top: 12px;
            border-right: 3px solid var(--success);
        }
        
        .homework-title {
            font-family: 'Cairo', sans-serif;
            font-size: 14px;
            font-weight: 600;
            color: var(--dark);
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .homework-desc {
            font-family: 'Tajawal', sans-serif;
            font-size: 13px;
            color: var(--text);
            line-height: 1.4;
        }
        
        /* Ø¨Ø·Ø§Ù‚Ø© Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹Ø§Øª Ø§Ù„Ø¯Ø±Ø§Ø³ÙŠØ© - Ù…Ø¹Ø¯Ù„Ø© */
        .groups-preview {
            display: flex;
            flex-direction: column;
            gap: 8px;
            margin-top: 12px;
        }
        
        .group-day {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 12px;
            background: rgba(124, 58, 237, 0.08);
            border-radius: var(--radius-sm);
            border: 1px solid rgba(124, 58, 237, 0.1);
        }
        
        .group-name {
            font-family: 'Cairo', sans-serif;
            font-size: 14px;
            font-weight: 600;
            color: var(--accent);
        }
        
        .group-status {
            font-family: 'Tajawal', sans-serif;
            font-size: 12px;
            color: var(--accent);
            padding: 4px 8px;
            background: rgba(124, 58, 237, 0.1);
            border-radius: 12px;
        }
        
        /* Ø´Ø±ÙŠØ· Ø§Ù„ØªÙ‚Ø¯Ù… - Ù…Ø¹Ø¯Ù„ */
        .progress-container {
            margin-top: 16px;
        }
        
        .progress-label {
            display: flex;
            justify-content: space-between;
            margin-bottom: 6px;
            font-size: 13px;
        }
        
        .progress-bar {
            height: 6px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 3px;
            overflow: hidden;
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--success), #34d399);
            border-radius: 3px;
            width: 0%;
            transition: width 1s ease;
        }
        
        /* Ø²Ø± Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ø­ØµØµ - Ù…Ø¹Ø¯Ù„ */
        .schedule-btn {
            background: var(--card-bg);
            border: 1px solid var(--primary);
            color: var(--primary);
            padding: 16px;
            border-radius: var(--radius);
            font-family: 'Cairo', sans-serif;
            font-size: 15px;
            font-weight: 600;
            text-align: center;
            margin: 20px 0;
            width: 100%;
            cursor: pointer;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }
        
        .schedule-btn:hover {
            background: rgba(37, 99, 235, 0.05);
            transform: translateY(-2px);
        }
        
        /* Ø§Ù„ØªØ¨ÙˆÙŠØ¨Ø§Øª Ø§Ù„Ø³ÙÙ„ÙŠØ© - Ù…Ø¹Ø¯Ù„Ø© */
        .bottom-tabs {
            position: fixed;
            bottom: 0;
            right: 0;
            left: 0;
            background: var(--card-bg);
            border-top: 1px solid #e2e8f0;
            display: flex;
            justify-content: space-around;
            padding: 12px 16px;
            z-index: 100;
        }
        
        .tab-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 4px;
            text-decoration: none;
            color: var(--text-light);
            transition: all 0.2s ease;
            padding: 8px;
            min-width: 60px;
        }
        
        .tab-item.active {
            color: var(--primary);
        }
        
        .tab-icon {
            font-size: 20px;
        }
        
        .tab-label {
            font-family: 'Tajawal', sans-serif;
            font-size: 11px;
            font-weight: 500;
        }
        
        /* Ø´Ø§Ø´Ø© Ø§Ù„ØªØ­Ù…ÙŠÙ„ - Ù…Ø¹Ø¯Ù„Ø© */
        .loader {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: var(--light);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            transition: opacity 0.3s ease;
        }
        
        .loader-spinner {
            width: 40px;
            height: 40px;
            border: 3px solid #e2e8f0;
            border-top-color: var(--primary);
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin-bottom: 16px;
        }
        
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        
        /* Ø§Ù„Ø±Ø³Ø§Ø¦Ù„ Ø§Ù„Ù…Ù†Ø¨Ø«Ù‚Ø© - Ù…Ø¹Ø¯Ù„Ø© */
        .notification {
            position: fixed;
            top: 20px;
            left: 20px;
            right: 20px;
            background: var(--card-bg);
            border-radius: var(--radius);
            padding: 16px;
            box-shadow: var(--shadow-lg);
            z-index: 1001;
            display: none;
            animation: slideIn 0.3s ease;
            border-right: 3px solid var(--primary);
        }
        
        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(-10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        /* Ø±Ø³Ø§Ù„Ø© Ø§Ù†ØªÙ‡Ø§Ø¡ Ø§Ù„Ø§Ø´ØªØ±Ø§Ùƒ - Ù…Ø¹Ø¯Ù„Ø© */
        .expired-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: var(--light);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 24px;
            z-index: 1002;
            animation: fadeIn 0.3s ease;
            color: var(--dark);
            text-align: center;
        }
        
        /* ØªØ­Ø³ÙŠÙ†Ø§Øª Ù„Ù„Ø¬ÙˆØ§Ù„ */
        @media (max-width: 768px) {
            .main-container {
                padding: 12px;
                padding-bottom: 70px;
            }
            
            .top-nav {
                padding: 12px;
                margin-bottom: 12px;
            }
            
            .user-avatar {
                width: 40px;
                height: 40px;
                font-size: 16px;
            }
            
            .user-name {
                font-size: 15px;
            }
            
            .timer-card {
                padding: 16px;
            }
            
            .timer-display {
                font-size: 20px;
            }
            
            .news-btn {
                padding: 14px;
                font-size: 15px;
                margin: 16px 0;
            }
            
            .dashboard-grid {
                grid-template-columns: 1fr;
                gap: 12px;
                margin: 16px 0;
            }
            
            .dashboard-card {
                padding: 16px;
                min-height: 130px;
            }
            
            .card-icon {
                width: 40px;
                height: 40px;
                font-size: 18px;
            }
            
            .card-title {
                font-size: 14px;
            }
            
            .card-content {
                font-size: 13px;
            }
            
            .grades-mini {
                grid-template-columns: repeat(4, 1fr);
            }
            
            .grade-value {
                font-size: 18px;
            }
            
            .bottom-tabs {
                padding: 10px 12px;
            }
            
            .tab-item {
                padding: 6px;
                min-width: 55px;
            }
            
            .tab-icon {
                font-size: 18px;
            }
        }
        
        /* Ø´Ø§Ø´Ø§Øª ØµØºÙŠØ±Ø© Ø¬Ø¯Ø§Ù‹ */
        @media (max-width: 480px) {
            .dashboard-grid {
                gap: 10px;
            }
            
            .timer-content {
                flex-direction: column;
                text-align: center;
                gap: 12px;
            }
            
            .timer-display {
                font-size: 18px;
            }
            
            .grades-mini {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .nav-actions {
                gap: 6px;
            }
            
            .nav-btn {
                width: 36px;
                height: 36px;
                font-size: 16px;
            }
        }
        
        /* ØªÙØ¹ÙŠÙ„ Ø§Ù„Ù„Ù…Ø³ */
        @media (hover: none) {
            .dashboard-card:hover,
            .grade-mini:hover,
            .news-btn:hover,
            .schedule-btn:hover {
                transform: none;
            }
            
            .dashboard-card:active,
            .grade-mini:active,
            .news-btn:active,
            .schedule-btn:active {
                transform: scale(0.98);
            }
        }
    </style>
</head>
<body>
    <!-- Ø´Ø§Ø´Ø© Ø§Ù„ØªØ­Ù…ÙŠÙ„ -->
    <div class="loader" id="loader">
        <div class="loader-spinner"></div>
        <div style="font-family: 'Cairo', sans-serif; font-size: 14px; font-weight: 600; color: var(--dark);">
            Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ù†Ø¸Ø§Ù… Ø§Ù„Ù…ØªØ§Ø¨Ø¹Ø©...
        </div>
    </div>
    
    <!-- Ø§Ù„Ø±Ø³Ø§Ø¦Ù„ Ø§Ù„Ù…Ù†Ø¨Ø«Ù‚Ø© -->
    <div class="notification" id="notification"></div>
    
    <!-- Ø±Ø³Ø§Ù„Ø© Ø§Ù†ØªÙ‡Ø§Ø¡ Ø§Ù„Ø§Ø´ØªØ±Ø§Ùƒ -->
    <div class="expired-overlay" id="expiredOverlay" style="display: none;">
        <div style="font-size: 48px; margin-bottom: 16px;">â°</div>
        <h2 style="font-size: 20px; margin-bottom: 12px; font-family: 'Cairo', sans-serif;">Ø§Ù†ØªÙ‡Øª Ù…Ø¯Ø© Ø§Ø´ØªØ±Ø§ÙƒÙƒ</h2>
        <p style="font-size: 14px; margin-bottom: 20px; font-family: 'Tajawal', sans-serif; line-height: 1.4;">
            ÙŠÙ…ÙƒÙ†Ùƒ ØªØ¬Ø¯ÙŠØ¯ Ø§Ø´ØªØ±Ø§ÙƒÙƒ Ù„Ù…ØªØ§Ø¨Ø¹Ø© Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ù†Ø¸Ø§Ù…
        </p>
        <a href="index.html" style="display: inline-block; background: var(--primary); color: white; padding: 12px 24px; 
           border-radius: 8px; text-decoration: none; font-weight: bold; font-size: 14px; 
           font-family: 'Cairo', sans-serif;">
            ğŸ”„ ØªØ¬Ø¯ÙŠØ¯ Ø§Ù„Ø§Ø´ØªØ±Ø§Ùƒ
        </a>
    </div>
    
    <div class="main-container">
        <!-- Ø´Ø±ÙŠØ· Ø§Ù„ØªÙ†Ù‚Ù„ Ø§Ù„Ø¹Ù„ÙˆÙŠ -->
        <div class="top-nav">
            <div class="user-info">
                <div class="user-avatar" id="userAvatar">Ø·</div>
                <div class="user-details">
                    <div class="user-name" id="userName">Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„...</div>
                    <div class="user-class" id="userClass">
                        <span class="material-icons-round" style="font-size: 14px;">school</span>
                        <span id="className">-</span>
                    </div>
                </div>
            </div>
            <div class="nav-actions">
                <button class="nav-btn" onclick="refreshData()">
                    <span class="material-icons-round">refresh</span>
                </button>
                <button class="nav-btn" onclick="showNotification('ØªØ­Ø¯ÙŠØ« Ù‚Ø±ÙŠØ¨Ø§Ù‹')">
                    <span class="material-icons-round">notifications</span>
                </button>
            </div>
        </div>
        
        <!-- Ø¨Ø·Ø§Ù‚Ø© Ø§Ù„Ù…Ø¤Ù‚Øª -->
        <div class="timer-card">
            <div class="timer-content">
                <div class="timer-text">
                    <h3>â³ Ø§Ù„Ù…Ø¯Ø© Ø§Ù„Ù…ØªØ¨Ù‚ÙŠØ©</h3>
                    <p>Ø­ØªÙ‰ Ù†Ù‡Ø§ÙŠØ© Ø§Ù„Ø§Ø´ØªØ±Ø§Ùƒ</p>
                </div>
                <div class="timer-display" id="remainingTime">00 ÙŠÙˆÙ…</div>
            </div>
            <div class="progress-container">
                <div class="progress-label">
                    <span>Ù…Ø³ØªÙˆÙ‰ Ø§Ù„ØªÙ‚Ø¯Ù…</span>
                    <span id="progressPercent">0%</span>
                </div>
                <div class="progress-bar">
                    <div class="progress-fill" id="progressFill"></div>
                </div>
            </div>
        </div>
        
        <!-- Ø²Ø± Ø§Ù„Ø£Ø®Ø¨Ø§Ø± -->
        <button class="news-btn" id="newsButton">
            <span>ğŸ“¢</span>
            <span id="newsButtonText">Ø£Ø®Ø¨Ø§Ø± Ø§Ù„ÙØµÙ„ ÙˆØ§Ù„Ù…Ø¯Ø±Ø³Ø©</span>
            <span class="material-icons-round" style="font-size: 18px;">arrow_left</span>
        </button>
        
        <!-- Ø§Ù„Ø´Ø¨ÙƒØ© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© -->
        <div class="dashboard-grid">
            <!-- Ù…Ø³ØªÙˆÙ‰ Ø§Ù„Ø·Ø§Ù„Ø¨ -->
            <div class="dashboard-card">
                <div class="card-header">
                    <div class="card-icon">ğŸ“Š</div>
                    <div class="card-title">Ù…Ø³ØªÙˆØ§Ùƒ Ø§Ù„Ø¯Ø±Ø§Ø³ÙŠ</div>
                </div>
                <div class="card-content" id="studentLevel">
                    Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ ØªÙ‚ÙŠÙŠÙ… Ù…Ø³ØªÙˆÙ‰ Ø§Ù„Ø·Ø§Ù„Ø¨...
                </div>
            </div>
            
            <!-- Ø³Ù„ÙˆÙƒ Ø§Ù„Ø·Ø§Ù„Ø¨ -->
            <div class="dashboard-card">
                <div class="card-header">
                    <div class="card-icon">â­</div>
                    <div class="card-title">Ø§Ù„Ø³Ù„ÙˆÙƒ ÙˆØ§Ù„Ø£Ø¯Ø§Ø¡</div>
                </div>
                <div class="card-content" id="studentBehavior">
                    Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ ØªÙ‚ÙŠÙŠÙ… Ø§Ù„Ø³Ù„ÙˆÙƒ...
                </div>
            </div>
            
            <!-- Ø¯Ø±Ø¬Ø§Øª Ø§Ù„Ø·Ø§Ù„Ø¨ -->
            <div class="dashboard-card">
                <div class="card-header">
                    <div class="card-icon">ğŸ¯</div>
                    <div class="card-title"> Ø§Ù„Ø¯Ø±Ø¬Ø§Øª</div>
                </div>
                <div class="grades-mini" id="studentGrades">
                    <div class="grade-mini">
                        <div class="grade-label">Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„</div>
                        <div class="grade-value">-</div>
                    </div>
                </div>
            </div>
            
            <!-- Ø§Ù„ÙˆØ§Ø¬Ø¨Ø§Øª -->
            <div class="dashboard-card">
                <div class="card-header">
                    <div class="card-icon">ğŸ“</div>
                    <div class="card-title">ÙˆØ§Ø¬Ø¨Ø§Øª Ø§Ù„ÙŠÙˆÙ…</div>
                </div>
                <div class="homework-preview" id="homeworkPreview">
                    <div class="homework-title">
                        <span class="material-icons-round" style="font-size: 16px;">assignment</span>
                        Ø§Ù„ÙˆØ§Ø¬Ø¨ Ø§Ù„Ø®Ø§Øµ Ø¨Ø§Ù„Ø·Ø§Ù„Ø¨
                    </div>
                    <div class="homework-desc" id="homeworkDesc">
                        Ø³ÙŠØªÙ… Ø¹Ø±Ø¶ ÙˆØ§Ø¬Ø¨Ø§Øª Ø§Ù„ÙØµÙ„ Ù‡Ù†Ø§
                    </div>
                </div>
            </div>
            
            <!-- Ù…Ø¬Ù…ÙˆØ¹Ø§Øª Ø§Ù„Ø¯Ø±Ø§Ø³Ø© -->
            <div class="dashboard-card">
                <div class="card-header">
                    <div class="card-icon">ğŸ‘¥</div>
                    <div class="card-title">Ù…Ø¬Ù…ÙˆØ¹Ø§Øª Ø§Ù„Ø¯Ø±Ø§Ø³Ø©</div>
                </div>
                <div class="groups-preview" id="groupsPreview">
                    <div class="group-day">
                        <div class="group-name">Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„</div>
                        <div class="group-status">Ù‚Ø±ÙŠØ¨Ø§Ù‹</div>
                    </div>
                </div>
            </div>
            
            <!-- Ø­Ø§Ù„Ø© Ø§Ù„ÙˆØ§Ø¬Ø¨ -->
            <div class="dashboard-card">
                <div class="card-header">
                    <div class="card-icon">âœ…</div>
                    <div class="card-title">Ø­Ø§Ù„Ø© ÙˆØ§Ø¬Ø¨Ø§ØªÙƒ</div>
                </div>
                <div class="card-content" id="homeworkStatus">
                    Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø­Ø§Ù„Ø© Ø§Ù„ÙˆØ§Ø¬Ø¨Ø§Øª...
                </div>
            </div>
        </div>
        
        <!-- Ø²Ø± Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ø­ØµØµ -->
        <button class="schedule-btn" id="scheduleButton">
            <span class="material-icons-round" style="font-size: 20px;">calendar_today</span>
            <span>Ø¥Ù†Ø´Ø§Ø¡ Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ø­ØµØµ Ø§Ù„Ø®Ø§Øµ Ø¨Ùƒ</span>
            <span class="material-icons-round" style="font-size: 18px;">chevron_left</span>
        </button>
    </div>
    
    <!-- Ø§Ù„ØªØ¨ÙˆÙŠØ¨Ø§Øª Ø§Ù„Ø³ÙÙ„ÙŠØ© -->
    <div class="bottom-tabs">
        <a href="#" class="tab-item active">
            <span class="material-icons-round tab-icon">dashboard</span>
            <span class="tab-label">Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</span>
        </a>
        <a href="#" class="tab-item" onclick="showNotification('Ù‚Ø±ÙŠØ¨Ø§Ù‹ - Ø§Ù„Ù…Ù„Ù Ø§Ù„Ø´Ø®ØµÙŠ')">
            <span class=""></span>
            <span class="tab-label"></span>
        </a>
        <a href="#" class="tab-item" onclick="showNotification('Ù‚Ø±ÙŠØ¨Ø§Ù‹ - Ø§Ù„ØªÙ‚ÙˆÙŠÙ… Ø§Ù„Ø¯Ø±Ø§Ø³ÙŠ')">
            <span class=""></span>
            <span class="tab-label"></span>
        </a>
        <a href="#" class="tab-item" onclick="showNotification('Ù‚Ø±ÙŠØ¨Ø§Ù‹ - Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª')">
            <span class=""></span>
            <span class="tab-label"></span>
        </a>
    </div>

    <!-- ÙƒÙˆØ¯ JavaScript Ø§Ù„Ø£ØµÙ„ÙŠ Ø¨Ø¯ÙˆÙ† ØªØºÙŠÙŠØ± -->
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
        import { 
            getFirestore, 
            collection, 
            getDocs, 
            query, 
            where, 
            doc, 
            getDoc
        } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

        const firebaseConfig = {
            apiKey: "AIzaSyDFO3F3E4vie6WA8fCA00rmRp_0_2CPq5I",
            authDomain: "exam-1fd4a.firebaseapp.com",
            projectId: "exam-1fd4a",
            storageBucket: "exam-1fd4a.firebasestorage.app",
            messagingSenderId: "861838351458",
            appId: "1:861838351458:web:58087fe82ad951b9bac53b",
            measurementId: "G-Q05JBNZJ3V"
        };

        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);

        // Ø§Ù„ÙƒÙˆÙ„ÙŠÙƒØ´Ù†Ø§Øª
        const COLLECTIONS = {
            STUDENTS: 'students',
            STUDENT_DATA: 'student_data',
            CLASS_INFO: 'class_information'
        };

        // Ø­Ø§Ù„Ø© Ø§Ù„ØªØ·Ø¨ÙŠÙ‚
        let studentData = null;
        let studentAdditionalData = null;
        let classInfo = null;
        let subscriptionEndDate = null;
        let countdownInterval = null;

        // Ø¹Ù†Ø§ØµØ± DOM
        const loader = document.getElementById('loader');
        const notification = document.getElementById('notification');
        const expiredOverlay = document.getElementById('expiredOverlay');
        const newsButton = document.getElementById('newsButton');
        const scheduleButton = document.getElementById('scheduleButton');

        // Ø¹Ù†Ø¯ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø©
        document.addEventListener('DOMContentLoaded', async () => {
            // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ÙˆØ¬ÙˆØ¯ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø·Ø§Ù„Ø¨
            const savedState = localStorage.getItem('studentRegistrationState');
            
            if (!savedState) {
                showNotification('ÙŠØ±Ø¬Ù‰ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø£ÙˆÙ„Ø§Ù‹', 'error');
                setTimeout(() => {
                    window.location.href = 'index.html';
                }, 3000);
                return;
            }
            
            const parsedState = JSON.parse(savedState);
            
            // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù†ØªÙ‡Ø§Ø¡ Ø§Ù„Ø§Ø´ØªØ±Ø§Ùƒ
            if (parsedState.subscriptionEndDate) {
                subscriptionEndDate = new Date(parsedState.subscriptionEndDate);
                if (subscriptionEndDate <= new Date()) {
                    showExpiredMessage();
                    return;
                }
            }
            
            // Ø¨Ø¯Ø¡ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
            await loadStudentData(parsedState);
        });

        // ØªØ­Ù…ÙŠÙ„ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø·Ø§Ù„Ø¨
        async function loadStudentData(state) {
            try {
                showLoader(true);
                
                // Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† Ø§Ù„Ø·Ø§Ù„Ø¨
                let studentQuery;
                
                if (state.subscriptionCode) {
                    studentQuery = query(
                        collection(db, COLLECTIONS.STUDENTS),
                        where("code", "==", state.subscriptionCode)
                    );
                } else if (state.currentStudent?.phone) {
                    studentQuery = query(
                        collection(db, COLLECTIONS.STUDENTS),
                        where("phone", "==", state.currentStudent.phone)
                    );
                } else {
                    throw new Error('Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¨ÙŠØ§Ù†Ø§Øª ÙƒØ§ÙÙŠØ© Ù„Ù„Ø¨Ø­Ø«');
                }
                
                const studentSnapshot = await getDocs(studentQuery);
                
                if (studentSnapshot.empty) {
                    throw new Error('Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø·Ø§Ù„Ø¨');
                }
                
                const studentDoc = studentSnapshot.docs[0];
                studentData = { id: studentDoc.id, ...studentDoc.data() };
                
                // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø£Ù† Ø§Ù„Ø·Ø§Ù„Ø¨ Ù†Ø´Ø·
                if (!studentData.active) {
                    throw new Error('Ø­Ø³Ø§Ø¨Ùƒ ØºÙŠØ± Ù†Ø´Ø·ØŒ ÙŠØ±Ø¬Ù‰ Ø§Ù„ØªÙˆØ§ØµÙ„ Ù…Ø¹ Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©');
                }
                
                // ØªØ­Ø¯ÙŠØ« ØªØ§Ø±ÙŠØ® Ø§Ù„Ø§Ù†ØªÙ‡Ø§Ø¡
                subscriptionEndDate = new Date(studentData.endDate);
                
                // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù†ØªÙ‡Ø§Ø¡ Ø§Ù„Ø§Ø´ØªØ±Ø§Ùƒ
                if (subscriptionEndDate <= new Date()) {
                    showExpiredMessage();
                    return;
                }
                
                // Ø¹Ø±Ø¶ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø·Ø§Ù„Ø¨
                displayStudentInfo();
                
                // ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¥Ø¶Ø§ÙÙŠØ©
                await loadStudentAdditionalData();
                
                // ØªØ­Ù…ÙŠÙ„ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ÙØµÙ„
                await loadClassInfo();
                
                // Ø¨Ø¯Ø¡ Ø§Ù„Ù…Ø¤Ù‚Øª
                startCountdown();
                
                // Ø­Ø³Ø§Ø¨ Ù…Ø³ØªÙˆÙ‰ Ø§Ù„ØªÙ‚Ø¯Ù…
                calculateProgress();
                
                // Ø¥Ø®ÙØ§Ø¡ Ø´Ø§Ø´Ø© Ø§Ù„ØªØ­Ù…ÙŠÙ„
                setTimeout(() => {
                    showLoader(false);
                    showNotification('Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨Ùƒ ÙÙŠ Ù†Ø¸Ø§Ù… Ø§Ù„Ù…ØªØ§Ø¨Ø¹Ø© Ø§Ù„Ø¯Ø±Ø§Ø³ÙŠØ©! ğŸ“', 'success');
                }, 1200);
                
            } catch (error) {
                console.error('Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª:', error);
                showNotification(error.message || 'Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª', 'error');
                setTimeout(() => {
                    window.location.href = 'index.html';
                }, 4000);
            }
        }

        // ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¥Ø¶Ø§ÙÙŠØ©
        async function loadStudentAdditionalData() {
            try {
                const studentDataQuery = query(
                    collection(db, COLLECTIONS.STUDENT_DATA),
                    where("studentId", "==", studentData.id)
                );
                
                const studentDataSnapshot = await getDocs(studentDataQuery);
                
                if (!studentDataSnapshot.empty) {
                    const studentDataDoc = studentDataSnapshot.docs[0];
                    studentAdditionalData = { id: studentDataDoc.id, ...studentDataDoc.data() };
                } else {
                    studentAdditionalData = {
                        level: 'Ù„Ù… ÙŠØªÙ… Ø§Ù„ØªÙ‚ÙŠÙŠÙ… Ø¨Ø¹Ø¯',
                        behavior: 'Ù„Ù… ÙŠØªÙ… Ø§Ù„ØªÙ‚ÙŠÙŠÙ… Ø¨Ø¹Ø¯',
                        homeworkStatus: 'Ù„Ù… ÙŠØªÙ… Ø§Ù„ØªÙ‚ÙŠÙŠÙ… Ø¨Ø¹Ø¯',
                        grades: []
                    };
                }
                
                displayStudentAdditionalInfo();
                
            } catch (error) {
                console.error('Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¥Ø¶Ø§ÙÙŠØ©:', error);
                studentAdditionalData = {
                    level: 'Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„...',
                    behavior: 'Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„...',
                    homeworkStatus: 'Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„...',
                    grades: []
                };
                displayStudentAdditionalInfo();
            }
        }

        // ØªØ­Ù…ÙŠÙ„ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ÙØµÙ„
        async function loadClassInfo() {
            try {
                // Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„ÙØµÙ„
                const classQuery = query(
                    collection(db, COLLECTIONS.CLASS_INFO),
                    where("className", "==", studentData.class)
                );
                
                const classSnapshot = await getDocs(classQuery);
                
                if (!classSnapshot.empty) {
                    const classDoc = classSnapshot.docs[0];
                    classInfo = { id: classDoc.id, ...classDoc.data() };
                } else {
                    // Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† Ø£Ø®Ø¨Ø§Ø± Ø§Ù„Ù…Ø¯Ø±Ø³Ø© Ø§Ù„Ø¹Ø§Ù…Ø©
                    const schoolQuery = query(
                        collection(db, COLLECTIONS.CLASS_INFO),
                        where("className", "==", "school")
                    );
                    
                    const schoolSnapshot = await getDocs(schoolQuery);
                    
                    if (!schoolSnapshot.empty) {
                        const schoolDoc = schoolSnapshot.docs[0];
                        classInfo = { id: schoolDoc.id, ...schoolDoc.data() };
                    } else {
                        classInfo = {
                            news: 'Ù„Ø§ ØªÙˆØ¬Ø¯ Ø£Ø®Ø¨Ø§Ø± Ø§Ù„ÙŠÙˆÙ…',
                            homework: 'Ù„Ø§ ØªÙˆØ¬Ø¯ ÙˆØ§Ø¬Ø¨Ø§Øª Ø§Ù„ÙŠÙˆÙ…',
                            groupHomework: {
                                saturday: 'Ù„Ø§ ÙŠÙˆØ¬Ø¯ ÙˆØ§Ø¬Ø¨',
                                tuesday: 'Ù„Ø§ ÙŠÙˆØ¬Ø¯ ÙˆØ§Ø¬Ø¨',
                                thursday: 'Ù„Ø§ ÙŠÙˆØ¬Ø¯ ÙˆØ§Ø¬Ø¨'
                            }
                        };
                    }
                }
                
                displayClassInfo();
                
            } catch (error) {
                console.error('Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„ÙØµÙ„:', error);
                classInfo = {
                    news: 'Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø£Ø®Ø¨Ø§Ø±...',
                    homework: 'Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ÙˆØ§Ø¬Ø¨Ø§Øª...',
                    groupHomework: {
                        saturday: 'Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„',
                        tuesday: 'Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„',
                        thursday: 'Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„'
                    }
                };
                displayClassInfo();
            }
        }

        // Ø¹Ø±Ø¶ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø·Ø§Ù„Ø¨
        function displayStudentInfo() {
            if (!studentData) return;
            
            // Ø§Ù„Ø§Ø³Ù… ÙˆØ§Ù„ØµÙˆØ±Ø©
            document.getElementById('userName').textContent = studentData.name;
            document.getElementById('userAvatar').textContent = studentData.name.charAt(0);
            
            // Ø§Ù„ÙØµÙ„
            document.getElementById('className').textContent = studentData.class;
            
            // ØªØ­Ø¯ÙŠØ« Ø²Ø± Ø§Ù„Ø£Ø®Ø¨Ø§Ø±
            document.getElementById('newsButtonText').textContent = `Ø£Ø®Ø¨Ø§Ø± ${studentData.class}`;
        }

        // Ø¹Ø±Ø¶ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¥Ø¶Ø§ÙÙŠØ©
        function displayStudentAdditionalInfo() {
            if (!studentAdditionalData) return;
            
            // Ù…Ø³ØªÙˆÙ‰ Ø§Ù„Ø·Ø§Ù„Ø¨
            document.getElementById('studentLevel').textContent = 
                studentAdditionalData.level || 'Ù„Ù… ÙŠØªÙ… Ø§Ù„ØªÙ‚ÙŠÙŠÙ… Ø¨Ø¹Ø¯';
            
            // Ø³Ù„ÙˆÙƒ Ø§Ù„Ø·Ø§Ù„Ø¨
            document.getElementById('studentBehavior').textContent = 
                studentAdditionalData.behavior || 'Ù„Ù… ÙŠØªÙ… Ø§Ù„ØªÙ‚ÙŠÙŠÙ… Ø¨Ø¹Ø¯';
            
            // Ø­Ø§Ù„Ø© Ø§Ù„ÙˆØ§Ø¬Ø¨
            document.getElementById('homeworkStatus').textContent = 
                studentAdditionalData.homeworkStatus || 'Ù„Ù… ÙŠØªÙ… Ø§Ù„ØªÙ‚ÙŠÙŠÙ… Ø¨Ø¹Ø¯';
            
            // Ø§Ù„Ø¯Ø±Ø¬Ø§Øª
            const gradesContainer = document.getElementById('studentGrades');
            gradesContainer.innerHTML = '';
            
            if (studentAdditionalData.grades && studentAdditionalData.grades.length > 0) {
                studentAdditionalData.grades.slice(0, 4).forEach(grade => {
                    const gradeDiv = document.createElement('div');
                    gradeDiv.className = 'grade-mini';
                    gradeDiv.innerHTML = `
                        <div class="grade-label">${grade.title}</div>
                        <div class="grade-value">${grade.value}</div>
                    `;
                    gradesContainer.appendChild(gradeDiv);
                });
            } else {
                gradesContainer.innerHTML = `
                    <div class="grade-mini">
                        <div class="grade-label">Ù„Ø§ ØªÙˆØ¬Ø¯</div>
                        <div class="grade-value">-</div>
                    </div>
                `;
            }
        }

        // Ø¹Ø±Ø¶ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„ÙØµÙ„
        function displayClassInfo() {
            if (!classInfo) return;
            
            // Ø§Ù„ÙˆØ§Ø¬Ø¨Ø§Øª
            const homeworkDesc = document.getElementById('homeworkDesc');
            homeworkDesc.textContent = classInfo.homework || 'Ù„Ø§ ØªÙˆØ¬Ø¯ ÙˆØ§Ø¬Ø¨Ø§Øª Ø§Ù„ÙŠÙˆÙ…';
            
            // Ù…Ø¬Ù…ÙˆØ¹Ø§Øª Ø§Ù„Ø¯Ø±Ø§Ø³Ø©
            const groupsContainer = document.getElementById('groupsPreview');
            groupsContainer.innerHTML = '';
            
            if (classInfo.groupHomework) {
                const groups = [
                    { day: 'Ø§Ù„Ø³Ø¨Øª', work: classInfo.groupHomework.saturday },
                    { day: 'Ø§Ù„Ø«Ù„Ø§Ø«Ø§Ø¡', work: classInfo.groupHomework.tuesday },
                    { day: 'Ø§Ù„Ø®Ù…ÙŠØ³', work: classInfo.groupHomework.thursday }
                ];
                
                groups.forEach(group => {
                    if (group.work && group.work.trim() !== '') {
                        const groupDiv = document.createElement('div');
                        groupDiv.className = 'group-day';
                        groupDiv.innerHTML = `
                            <div class="group-name">${group.day}</div>
                            <div class="group-status">ÙˆØ§Ø¬Ø¨</div>
                        `;
                        groupsContainer.appendChild(groupDiv);
                    }
                });
                
                if (groupsContainer.children.length === 0) {
                    groupsContainer.innerHTML = `
                        <div class="group-day">
                            <div class="group-name">Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ø¬Ù…ÙˆØ¹Ø§Øª</div>
                            <div class="group-status">-</div>
                        </div>
                    `;
                }
            }
        }

        // Ø¨Ø¯Ø¡ Ø§Ù„Ù…Ø¤Ù‚Øª
        function startCountdown() {
            if (!subscriptionEndDate) return;
            
            function updateCountdown() {
                const now = new Date();
                const timeRemaining = subscriptionEndDate - now;
                
                if (timeRemaining <= 0) {
                    clearInterval(countdownInterval);
                    showExpiredMessage();
                    return;
                }
                
                const days = Math.floor(timeRemaining / (1000 * 60 * 60 * 24));
                const hours = Math.floor((timeRemaining % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                const minutes = Math.floor((timeRemaining % (1000 * 60 * 60)) / (1000 * 60));
                
                let displayText = '';
                if (days > 0) {
                    displayText = `${days} ÙŠÙˆÙ…`;
                } else if (hours > 0) {
                    displayText = `${hours} Ø³Ø§Ø¹Ø©`;
                } else {
                    displayText = `${minutes} Ø¯Ù‚ÙŠÙ‚Ø©`;
                }
                
                document.getElementById('remainingTime').textContent = displayText;
            }
            
            updateCountdown();
            countdownInterval = setInterval(updateCountdown, 60000);
        }

        // Ø­Ø³Ø§Ø¨ Ù…Ø³ØªÙˆÙ‰ Ø§Ù„ØªÙ‚Ø¯Ù…
        function calculateProgress() {
            if (!studentData || !subscriptionEndDate) return;
            
            const startDate = new Date(studentData.startDate);
            const endDate = subscriptionEndDate;
            const now = new Date();
            
            const totalDuration = endDate - startDate;
            const elapsedDuration = now - startDate;
            
            let progressPercent = 0;
            if (totalDuration > 0) {
                progressPercent = Math.min(100, Math.max(0, (elapsedDuration / totalDuration) * 100));
            }
            
            document.getElementById('progressPercent').textContent = `${Math.round(progressPercent)}%`;
            document.getElementById('progressFill').style.width = `${progressPercent}%`;
        }

        // Ø²Ø± Ø§Ù„Ø£Ø®Ø¨Ø§Ø±
        newsButton.addEventListener('click', () => {
            if (studentData) {
                localStorage.setItem('studentHomeState', JSON.stringify({
                    studentData,
                    classInfo
                }));
                window.location.href = 'class.html';
            }
        });

        // Ø²Ø± Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ø­ØµØµ
        scheduleButton.addEventListener('click', () => {
            if (studentData) {
                localStorage.setItem('studentHomeState', JSON.stringify({
                    studentData,
                    classInfo
                }));
                window.location.href = 'table.html';
            }
        });

        // Ø²Ø± Ø§Ù„ØªØ­Ø¯ÙŠØ«
        async function refreshData() {
            showNotification('Ø¬Ø§Ø±ÙŠ ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª...', 'info');
            await loadStudentAdditionalData();
            await loadClassInfo();
            showNotification('ØªÙ… ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¨Ù†Ø¬Ø§Ø­! âœ…', 'success');
        }

        // Ø¹Ø±Ø¶ Ø±Ø³Ø§Ù„Ø© Ø§Ù†ØªÙ‡Ø§Ø¡ Ø§Ù„Ø§Ø´ØªØ±Ø§Ùƒ
        function showExpiredMessage() {
            document.querySelector('.main-container').style.display = 'none';
            document.querySelector('.bottom-tabs').style.display = 'none';
            expiredOverlay.style.display = 'flex';
            localStorage.removeItem('studentRegistrationState');
        }

        // Ø¯ÙˆØ§Ù„ Ù…Ø³Ø§Ø¹Ø¯Ø©
        function showLoader(show) {
            loader.style.display = show ? 'flex' : 'none';
        }
        
        function showNotification(text, type = 'info') {
            notification.textContent = text;
            notification.style.display = 'block';
            notification.style.borderRightColor = 
                type === 'error' ? 'var(--danger)' :
                type === 'success' ? 'var(--success)' :
                type === 'warning' ? 'var(--warning)' :
                'var(--primary)';
            
            setTimeout(() => {
                notification.style.display = 'none';
            }, 3000);
        }

        // Ø­Ù…Ø§ÙŠØ© Ø§Ù„ØµÙØ­Ø©
        window.addEventListener('beforeunload', (e) => {
            if (studentData && subscriptionEndDate > new Date()) {
                e.preventDefault();
                e.returnValue = '';
            }
        });

        // ØªØ­Ø¯ÙŠØ« Ø¹Ù†Ø¯ Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„ØµÙØ­Ø©
        window.addEventListener('pageshow', (event) => {
            if (event.persisted) {
                refreshData();
            }
        });
    </script>
</body>
</html>